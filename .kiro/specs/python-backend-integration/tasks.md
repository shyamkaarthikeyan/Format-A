m# Implementation Plan

- [x] 1. Create separate Python backend repository with working IEEE generator



  - Initialize new Git repository for Python backend (format-a-python-backend)
  - Copy working `ieee_generator_fixed.py` from `/server/` to new repository root
  - Create `/api/` directory structure matching current working setup
  - Copy existing `requirements.txt` with working dependencies (python-docx, reportlab, etc.)
  - _Requirements: 1.1, 1.4_

- [x] 2. Set up Vercel configuration for Python-only deployment





  - Create `vercel.json` with Python runtime configuration (no framework preset)
  - Configure CORS headers to allow requests from format-a.vercel.app domain
  - Set up functions configuration to use Python 3.11 runtime for `/api/*.py` files (matching current runtime.txt)
  - Copy `runtime.txt` with `python-3.11.11` to maintain version consistency
  - Test deployment with existing working `test-python.py` endpoint
  - _Requirements: 1.1, 1.2, 2.1, 2.3_

- [x] 3. Port working document generation endpoint to separate repository





  - Copy `/api/generate/preview-images.py` to new repository as `/api/document-generator.py`
  - Update import path to use local `ieee_generator_fixed.py` instead of server directory
  - Modify CORS headers to specifically allow format-a.vercel.app origin
  - Test document generation endpoint works in separate repository deployment
  - _Requirements: 2.2, 2.3, 3.1_

- [x] 4. Set up database connectivity using existing patterns





  - Copy database connection pattern from current Node.js functions
  - Add `psycopg2-binary` to requirements.txt for PostgreSQL connectivity
  - Create database utility functions that match existing Neon database setup
  - Test database connectivity with simple health check endpoint
  - _Requirements: 4.1, 4.3, 4.4_

- [x] 5. Implement JWT authentication matching current system




  - Copy JWT validation logic from existing Node.js auth functions
  - Add `PyJWT` to requirements.txt for token validation
  - Create authentication middleware that validates tokens using same JWT_SECRET
  - Test authentication flow with tokens generated by format-a.vercel.app
  - _Requirements: 2.4, 4.2_

- [x] 6. Deploy Python backend to Vercel with custom domain






  - Deploy Python repository to Vercel (e.g., format-a-python.vercel.app)
  - Configure environment variables matching main application:
    - `DATABASE_URL` (Neon PostgreSQL connection string)
    - `JWT_SECRET` (for token validation)
    - `VITE_GOOGLE_CLIENT_ID` (for authentication integration)
    - Any other environment variables used by document generation
  - Create `.env.example` file documenting all required environment variables
  - Connect repository to GitHub for public access
  - Verify document generation endpoint works in production
  - Test CORS configuration allows requests from format-a.vercel.app
  - _Requirements: 1.2, 1.3, 4.1, 4.2_

- [x] 6.1 Fix Python backend public accessibility
  - ✅ Resolved authentication issues preventing public API access
  - ✅ Python backend endpoints are publicly accessible without authentication
  - ✅ All endpoints return proper responses (200 status codes)
  - ✅ IEEE document generation works from external requests
  - _Requirements: 1.2, 2.1, 2.2_

- [x] 6.2 **CRITICAL: Fix main application IEEE preview functionality**





  - Fix `/api/generate/preview-images.py` endpoint returning 404 errors in format-a.vercel.app
  - Ensure IEEE preview is visible and working on the main application
  - Test that users can see IEEE preview when using format-a.vercel.app directly
  - Verify preview displays proper IEEE formatting with title, authors, abstract, sections
  - _Requirements: 5.1, 5.2 - BLOCKING: Users cannot see IEEE preview on main app_
-

- [ ] 7. Update main application to integrate with separate Python backend

- [x] 7.1 Create proxy endpoints in main application for backward compatibility




  - Update `/api/generate/preview-images.py` to proxy requests to Python backend
  - Create proxy handlers for `/api/generate/docx`, `/api/generate/docx-to-pdf`, `/api/generate/email`
  - Implement fallback mechanism if Python backend is unavailable
  - Add request/response logging for debugging cross-service calls
  - _Requirements: 2.1, 2.2, 2.3_

- [x] 7.2 Update frontend API calls to use Python backend directly (optional optimization)





  - Modify frontend components to call Python backend directly for better performance
  - Update API base URL configuration to support both local and production environments
  - Implement client-side error handling for cross-origin requests
  - Test all document generation flows work from format-a.vercel.app
  - _Requirements: 2.1, 2.2, 2.3_

- [x] 8. Create all required document processing endpoints to match current functionality
- [x] 8.1 Create `/api/docx-generator.py` for DOCX generation (replaces `/api/generate/docx`)

  - ✅ Port DOCX generation logic using existing `ieee_generator_fixed.py`
  - ✅ Implement file download response handling (base64 encoded)
  - ✅ Add proper error handling and logging
  - ✅ Return format matches frontend expectations (`file_data`, `file_type`, `file_size`)
  - _Requirements: 3.1, 3.2_

- [x] 8.2 Create `/api/pdf-generator.py` for PDF generation (replaces `/api/generate/docx-to-pdf`)

  - ✅ Implement PDF generation with DOCX fallback for serverless limitations
  - ✅ Add preview mode support (query parameter `?preview=true`)
  - ✅ Implement proper file response handling for downloads
  - ✅ Return format matches frontend expectations with appropriate messaging
  - _Requirements: 3.1, 3.2_

- [x] 8.3 Create `/api/email-generator.py` for email functionality (replaces `/api/generate/email`)

  - ✅ Port email generation logic from current system
  - ✅ Implement email sending capabilities using SMTP
  - ✅ Add proper validation and error handling
  - ✅ Support document attachment and formatted email body
  - _Requirements: 3.1, 3.2_

- [x] 8.4 Add monitoring and utility endpoints


  - ✅ Create `/api/health.py` for monitoring Python backend status
  - ✅ Add `/api/test-connection.py` for testing database and service connectivity
  - ✅ Implement comprehensive logging for all endpoints
  - ⚠️ Test all endpoints work independently and from main application (blocked by Git connection)
  - _Requirements: 3.3, 4.4_

- [x] 9. Optimize local development workflow for both repositories





  - Set up `vercel dev` in Python repository for local testing
  - Configure local CORS to allow requests from main app's local server
  - Create development scripts to run both repositories simultaneously
  - Document setup process for running both repositories locally
  - _Requirements: 5.1, 5.3, 5.4_
-

- [x] 10. Implement comprehensive error handling and monitoring











  - Add detailed error logging to Python functions for debugging
  - Implement health check endpoints for monitoring Python backend
  - Add retry logic in main application for Python backend calls
  - Test error scenarios and recovery mechanisms between repositories
  - _Requirements: 2.3, 4.4, 5.2_


- [x] 11. Add advanced document processing features and optimizations












  - Implement batch document generation capabilities
  - Add file size validation and handling for Vercel's 50MB limit
  - Implement timeout handling for Vercel's 10-second execution limit
  - Add memory optimization for large document processing
  - Create document analytics and usage tracking endpoints
  - Test performance with multiple concurrent document generation requests
  - _Requirements: 3.2, 3.3_

- [ ] 12. Update Vercel routing configuration for seamless integration
  - Modify `vercel.json` in main repository to handle Python backend routing
  - Ensure existing `/api/generate/*` routes continue to work during transition
  - Add routing rules for fallback to Python backend when needed
  - Test that all existing frontend calls continue to work without modification
  - _Requirements: 2.1, 2.2, 2.3_

- [ ] 13. **CRITICAL: Connect Python backend to Git repository for public access**
  - ⚠️ **BLOCKER**: Python backend deployed but requires authentication due to missing Git connection
  - ⚠️ **IMPACT**: All API endpoints return 401 Unauthorized, frontend integration blocked
  - ⚠️ **SOLUTION**: Connect format-a-python-backend repository to GitHub (5-10 minutes)
  - **Steps**: 
    1. Create GitHub repository: `format-a-python-backend` (public)
    2. Connect local repo: `git remote add origin https://github.com/[username]/format-a-python-backend.git`
    3. Push code: `git push -u origin main`
    4. Connect Vercel to GitHub repository in dashboard
  - **Expected Result**: Python backend becomes publicly accessible without authentication
  - _Requirements: 1.2, 2.1, 2.2, 3.1, 5.1 - ALL BLOCKED until Git connection_

- [ ] 12. **CRITICAL: Fix preview integration between repositories**


  - **ISSUE**: Preview works locally but not on Vercel production
  - **ROOT CAUSE**: Main app's Node.js preview endpoint can't import IEEE generator in Vercel environment
  - **SOLUTION**: Update main app's preview endpoint to properly proxy to Python backend
  - **Steps**:
    1. Fix `/api/generate/preview-images.py` to always proxy to Python backend in production
    2. Update Python backend CORS to allow requests from format-a.vercel.app
    3. Ensure Python backend document-generator endpoint is working properly
    4. Test preview functionality works from format-a.vercel.app
  - **Expected Result**: IEEE preview displays correctly on main application
  - _Requirements: 5.1, 5.2 - CRITICAL for user experience_

- [ ] 13. Update Vercel routing configuration for seamless integration
  - Modify `vercel.json` in main repository to handle Python backend routing
  - Ensure existing `/api/generate/*` routes continue to work during transition
  - Add routing rules for fallback to Python backend when needed
  - Test that all existing frontend calls continue to work without modification
  - _Requirements: 2.1, 2.2, 2.3_

- [ ] 14. **CRITICAL: Connect Python backend to Git repository for public access**
  - ⚠️ **BLOCKER**: Python backend deployed but requires authentication due to missing Git connection
  - ⚠️ **IMPACT**: All API endpoints return 401 Unauthorized, frontend integration blocked
  - ⚠️ **SOLUTION**: Connect format-a-python-backend repository to GitHub (5-10 minutes)
  - **Steps**: 
    1. Create GitHub repository: `format-a-python-backend` (public)
    2. Connect local repo: `git remote add origin https://github.com/[username]/format-a-python-backend.git`
    3. Push code: `git push -u origin main`
    4. Connect Vercel to GitHub repository in dashboard
  - **Expected Result**: Python backend becomes publicly accessible without authentication
  - _Requirements: 1.2, 2.1, 2.2, 3.1, 5.1 - ALL BLOCKED until Git connection_

- [ ] 15. Finalize production deployment and integration
  - ⚠️ **DEPENDS ON**: Tasks 12, 13, 14 must be completed first
  - Test all document generation flows work from format-a.vercel.app
  - Verify IEEE preview functionality on main application
  - Test fallback mechanisms when Python backend unavailable
  - Validate error handling and CORS configuration
  - ✅ Both applications deployed and configured
  - ✅ Created comprehensive test scripts and documentation
  - ✅ Architecture and deployment process documented
  - _Requirements: 1.2, 2.1, 4.1 - Ready to test after previous tasks_